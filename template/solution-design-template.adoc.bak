= [Project Name] — Solution Design
:toc: left
:toclevels: 3
:numbered:
:icons: font
:sectanchors:
:kroki-server-url: http://localhost:8000
:kroki-fetch-diagram: true

// ============================================================================
// HOW TO USE THIS TEMPLATE
// ============================================================================
// 1. Replace all [bracketed placeholders] with your project details
// 2. Each section includes a sample diagram — replace with your actual content
// 3. Diagram types included for reference:
//    - PlantUML Component   → architecture / infrastructure
//    - PlantUML Sequence    → API flows / integrations
//    - PlantUML Activity    → business processes / decision flows
//    - PlantUML Gantt       → project timelines
//    - PlantUML C4          → system context / containers
//    - PlantUML Mindmap     → feature breakdowns / brainstorming
//    - PlantUML WBS         → work breakdown structure
//    - PlantUML State       → lifecycle / status machines
// 4. Render: npx asciidoctor -r asciidoctor-kroki solution-design-template.adoc
// 5. Requires: docker-compose up -d (Kroki + PlantUML server)
// ============================================================================

== Executive Summary

[One paragraph: what is the system, why is it needed, what does this document recommend.]

=== Key Decision

[cols="1,3"]
|===
|Criteria |Rationale

|**[Criterion 1]**
|[Why this matters]

|**[Criterion 2]**
|[Why this matters]
|===

== Problem Statement

=== Current Pain Point

[Describe the problem users/business face today.]

=== Proposed Solution

[2-3 sentences on the high-level approach.]

== System Context (C4 Model)

Shows the system boundaries, actors, and external dependencies.

.System Context Diagram
[plantuml,format=svg]
....
@startuml
!include <C4/C4_Context>

title System Context — [Project Name]

Person(user, "End User", "Uses the application")
Person(admin, "Admin", "Manages configuration")

System(system, "[System Name]", "Core application")

System_Ext(auth, "Auth Provider", "OAuth2 / SSO")
System_Ext(payment, "Payment Gateway", "Stripe / PayPal")
System_Ext(cdn, "CDN", "CloudFront / Cloudflare")

Rel(user, system, "Uses", "HTTPS")
Rel(admin, system, "Manages", "HTTPS")
Rel(system, auth, "Authenticates via", "OAuth2")
Rel(system, payment, "Processes payments", "REST API")
Rel(system, cdn, "Serves static assets", "HTTPS")
@enduml
....

== Architecture

=== Component Diagram

Shows internal services, data stores, and how they connect.

.Architecture Overview
[plantuml,format=svg]
....
@startuml
skinparam backgroundColor white
skinparam componentStyle rectangle
skinparam defaultFontSize 11

title [Project Name] — Component Architecture

cloud "Client Layer" {
  [Mobile App] as mobile
  [Web App] as web
}

node "API Layer" {
  [API Gateway] as gw
  [Auth Service] as auth
}

node "Business Logic" {
  [Service A] as svcA
  [Service B] as svcB
  [Worker / Queue] as worker
}

node "Data Layer" {
  database "PostgreSQL" as db
  database "Redis Cache" as cache
  storage "S3 / Blob" as storage
}

cloud "External" {
  [3rd Party API] as ext
}

mobile --> gw
web --> gw
gw --> auth
gw --> svcA
gw --> svcB
svcA --> db
svcA --> cache
svcB --> db
svcB --> storage
svcA --> worker
worker --> ext
@enduml
....

=== Sequence Diagram

Shows the runtime flow for a key use case.

.Core Flow — [Use Case Name]
[plantuml,format=svg]
....
@startuml
skinparam backgroundColor white
skinparam sequenceMessageAlign center

title [Use Case] — Sequence Flow

actor User
participant "Mobile App" as app
participant "API Gateway" as gw
participant "Auth Service" as auth
participant "Service A" as svc
database "PostgreSQL" as db
queue "Message Queue" as queue

User -> app: Initiates action
app -> gw: POST /api/action
gw -> auth: Validate token
auth --> gw: 200 OK

gw -> svc: Process request
svc -> db: Query / Write
db --> svc: Result

svc -> queue: Emit event (async)
svc --> gw: 200 Response
gw --> app: JSON result
app --> User: Show confirmation

note right of queue
  Async processing:
  notifications, analytics,
  3rd-party sync
end note
@enduml
....

=== Activity Diagram

Shows decision flows and business process logic.

.Business Process — [Process Name]
[plantuml,format=svg]
....
@startuml
skinparam backgroundColor white
title [Process Name] — Decision Flow

start

:User submits request;

if (Authenticated?) then (yes)
  :Validate input;

  if (Input valid?) then (yes)
    :Process request;

    fork
      :Update database;
    fork again
      :Send notification;
    fork again
      :Log analytics event;
    end fork

    :Return success;
  else (no)
    :Return validation error;
  endif
else (no)
  :Return 401 Unauthorized;
endif

stop
@enduml
....

=== State Diagram

Shows entity lifecycle — useful for orders, tickets, deployments, etc.

.Entity Lifecycle — [Entity Name]
[plantuml,format=svg]
....
@startuml
skinparam backgroundColor white
title [Entity] State Machine

[*] --> Draft

Draft --> Submitted : User submits
Draft --> Cancelled : User cancels

Submitted --> UnderReview : Auto-assign reviewer
Submitted --> Cancelled : User withdraws

UnderReview --> Approved : Reviewer approves
UnderReview --> Rejected : Reviewer rejects
UnderReview --> Submitted : Request changes

Approved --> Active : System activates
Rejected --> Draft : User revises

Active --> Suspended : Policy violation
Active --> Completed : Natural end

Suspended --> Active : Issue resolved
Suspended --> Cancelled : Escalation

Completed --> [*]
Cancelled --> [*]
@enduml
....

== Feature Breakdown

=== Mind Map

Quick visual of feature areas and sub-features.

.Feature Breakdown — [Project Name]
[plantuml,format=svg]
....
@startmindmap
title [Project Name] — Feature Areas

* [Project Name]
** Core Features
*** Feature A
**** Sub-feature A1
**** Sub-feature A2
*** Feature B
*** Feature C
** Integrations
*** Auth Provider
*** Payment Gateway
*** Analytics
** Non-Functional
*** Performance
**** < 200ms P95 latency
**** 1000 req/s capacity
*** Security
**** OAuth2 + MFA
**** Encryption at rest
*** Reliability
**** 99.9% SLA
**** Multi-AZ deployment
** Future / Phase 2
*** Feature D
*** Feature E
@endmindmap
....

=== Work Breakdown Structure

Hierarchical decomposition of deliverables — useful for estimation and planning.

.Work Breakdown — [Project Name]
[plantuml,format=svg]
....
@startwbs
title [Project Name] — WBS

* Project Delivery
** Phase 1: Foundation
*** Infrastructure Setup
*** CI/CD Pipeline
*** Auth Integration
** Phase 2: Core
*** Service A
**** API Design
**** Implementation
**** Testing
*** Service B
**** API Design
**** Implementation
**** Testing
*** Mobile App
**** UI Shell
**** Core Screens
**** Offline Support
** Phase 3: Launch
*** Performance Testing
*** Security Audit
*** Staged Rollout
@endwbs
....

== Options Comparison

[cols="2,1,1,1"]
|===
|Aspect |Option 1: MVP |Option 2: Full |Option 3: Scale

|**Scope**
|Core features only
|All features
|All + multi-region

|**Team size**
|4 devs
|8 devs
|15 devs

|**Timeline**
|4 months
|8 months
|12 months

|**CAPEX**
|$[amount]
|$[amount]
|$[amount]

|**OPEX / month**
|$[amount]
|$[amount]
|$[amount]

|**Risk**
|Low
|Medium
|High
|===

== Option [N]: [Option Name]

=== Overview

[2-3 sentences: what this option delivers, team size, timeline.]

=== Architecture

.Option [N] Architecture
[plantuml,format=svg]
....
@startuml
skinparam backgroundColor white
skinparam componentStyle rectangle

title Option [N]: [Name]

' -- Paste your option-specific architecture here --
' -- Copy the component diagram pattern from above --

node "API" {
  [API Gateway] as gw
  [Service A] as svc
}

database "Database" as db

gw --> svc
svc --> db
@enduml
....

=== Cost Breakdown

==== CAPEX (One-Time)

[cols="2,1,1,1,1"]
|===
|Item |Count |Rate |Duration |Cost

|Backend Developer
|2
|$[rate]/mo
|4 months
|$[total]

|Mobile Developer
|2
|$[rate]/mo
|4 months
|$[total]

|Cloud Setup
|—
|—
|—
|$[total]

|*TOTAL CAPEX*
|
|
|
|*$[total]*
|===

==== OPEX (Monthly)

[cols="2,1,1"]
|===
|Service |Spec |Monthly Cost

|Compute (ECS/EKS)
|[spec]
|$[cost]

|Database (RDS)
|[spec]
|$[cost]

|*TOTAL OPEX*
|
|*$[total]/mo*
|===

=== Timeline

.Option [N] Development Timeline
[plantuml,format=svg]
....
@startgantt
title Option [N]: [Name] — [duration], [team] devs
printscale weekly zoom 2
project starts 2026-03-01

<style>
ganttDiagram {
  task {
    FontSize 11
  }
  milestone {
    FontSize 11
    FontStyle bold
    BackGroundColor OrangeRed
    LineColor OrangeRed
  }
  separator {
    FontSize 12
    FontStyle bold
    BackGroundColor #F0F0F0
  }
}
</style>

-- Backend --
[Task 1 - Setup] starts 2026-03-01 and ends 2026-03-15
[Task 1 - Setup] is colored in #BBDEFB/#1976D2
[Task 2 - Core API] starts 2026-03-10 and ends 2026-04-01
[Task 2 - Core API] is colored in #BBDEFB/#1976D2
[Task 3 - Integration] starts 2026-04-01 and ends 2026-04-20
[Task 3 - Integration] is colored in #C8E6C9/#388E3C
[Task 4 - Polish] starts 2026-04-15 and ends 2026-05-01
[Task 4 - Polish] is colored in #FFE0B2/#E65100

-- Frontend --
[Task 5 - UI Shell] starts 2026-03-01 and ends 2026-03-20
[Task 5 - UI Shell] is colored in #BBDEFB/#1976D2
[Task 6 - Core Screens] starts 2026-03-20 and ends 2026-04-10
[Task 6 - Core Screens] is colored in #C8E6C9/#388E3C
[Task 7 - Final QA] starts 2026-04-20 and ends 2026-05-10
[Task 7 - Final QA] is colored in #FFE0B2/#E65100

-- Milestones --
[POC Demo] happens 2026-03-25
[MVP Launch] happens 2026-05-10

legend right
  |<#BBDEFB> POC Phase |
  |<#C8E6C9> MVP Phase |
  |<#FFE0B2> Full Phase |
  |<#OrangeRed> Milestone |
end legend
@endgantt
....

=== Risk Assessment

[cols="2,1,1,2"]
|===
|Risk |Probability |Impact |Mitigation

|[Risk 1]
|Medium
|High
|[How to mitigate]

|[Risk 2]
|Low
|Medium
|[How to mitigate]
|===

== Technical Deep Dives

=== [Topic 1: e.g., AI/ML Pipeline]

[Technical details, trade-offs, design decisions.]

=== [Topic 2: e.g., Data Architecture]

[Technical details, trade-offs, design decisions.]

== Assumptions & Constraints

=== Assumptions

* [Assumption 1]
* [Assumption 2]
* [Assumption 3]

=== Constraints

* [Constraint 1]
* [Constraint 2]

=== Out of Scope

* [Item 1]
* [Item 2]

== Recommended Next Steps

. [Step 1 — e.g., Approve Option N]
. [Step 2 — e.g., Finalize team allocation]
. [Step 3 — e.g., Begin POC sprint]
. [Step 4 — e.g., Schedule architecture review]

== Appendix

=== Diagram Types Reference

This section demonstrates all supported diagram types for quick copy-paste.

==== PlantUML Component
Architecture, infrastructure, service maps.
`[plantuml,format=svg]` with `@startuml` / `@enduml`

==== PlantUML Sequence
API flows, integration choreography.
`[plantuml,format=svg]` with `@startuml` / `@enduml`

==== PlantUML Activity
Decision flows, business processes.
`[plantuml,format=svg]` with `@startuml` / `@enduml`

==== PlantUML State
Entity lifecycle, status machines.
`[plantuml,format=svg]` with `@startuml` / `@enduml`

==== PlantUML Gantt
Timelines with phase coloring and milestones.
`[plantuml,format=svg]` with `@startgantt` / `@endgantt`

==== PlantUML C4 Context
System boundaries, actors, external systems.
`[plantuml,format=svg]` with `@startuml` + `!include <C4/C4_Context>`

==== PlantUML Mind Map
Feature breakdowns, brainstorming.
`[plantuml,format=svg]` with `@startmindmap` / `@endmindmap`

==== PlantUML WBS
Work breakdown, deliverable decomposition.
`[plantuml,format=svg]` with `@startwbs` / `@endwbs`

=== Rendering Instructions

[source,bash]
----
# Start Kroki server
docker-compose up -d

# Render to HTML
npx asciidoctor -r asciidoctor-kroki template/solution-design-template.adoc

# Open in browser
start template/solution-design-template.html
----
