<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Solution Architect">
<title>ADR-002: Data Ingestion Strategy</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>ADR-002: Data Ingestion Strategy</h1>
<div class="details">
<span id="author" class="author">Solution Architect</span><br>
<span id="revdate">2026-02-19</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_context">Context</a>
<ul class="sectlevel2">
<li><a href="#_source_1_wordpress_database">Source 1 — WordPress Database</a></li>
<li><a href="#_source_2_mobile_application">Source 2 — Mobile Application</a></li>
<li><a href="#_source_3_wholesaler_data">Source 3 — Wholesaler Data</a></li>
<li><a href="#_source_4_customer_emails">Source 4 — Customer Emails</a></li>
<li><a href="#_architectural_environment">Architectural Environment</a></li>
<li><a href="#_professional_assumptions">Professional Assumptions</a></li>
</ul>
</li>
<li><a href="#_decision">Decision</a>
<ul class="sectlevel2">
<li><a href="#_source_1_wordpress_direct_database_read_scheduled_sql_via_vpn">Source 1: WordPress — Direct Database Read (Scheduled SQL via VPN)</a></li>
<li><a href="#_source_2_mobile_app_api_integration_periodic_db_export_hybrid">Source 2: Mobile App — API Integration + Periodic DB Export (Hybrid)</a></li>
<li><a href="#_source_3_wholesaler_data_file_landing_zone_s3_schema_on_read">Source 3: Wholesaler Data — File Landing Zone (S3 + Schema-on-Read)</a></li>
<li><a href="#_source_4_customer_emails_no_separate_ingestion">Source 4: Customer Emails — No Separate Ingestion</a></li>
</ul>
</li>
<li><a href="#_alternatives_considered">Alternatives Considered</a>
<ul class="sectlevel2">
<li><a href="#_wordpress_ingestion_alternatives">WordPress Ingestion Alternatives</a></li>
<li><a href="#_mobile_app_ingestion_alternatives">Mobile App Ingestion Alternatives</a></li>
<li><a href="#_wholesaler_data_ingestion_alternatives">Wholesaler Data Ingestion Alternatives</a></li>
</ul>
</li>
<li><a href="#_consequences">Consequences</a>
<ul class="sectlevel2">
<li><a href="#_positive">Positive</a></li>
<li><a href="#_negative">Negative</a></li>
<li><a href="#_dependency_hiring_impact">Dependency &amp; Hiring Impact</a></li>
<li><a href="#_neutral">Neutral</a></li>
</ul>
</li>
<li><a href="#_quality_attribute_impact">Quality Attribute Impact</a></li>
<li><a href="#_follow_up_actions">Follow-Up Actions</a>
<ul class="sectlevel2">
<li><a href="#_before_implementation">Before Implementation</a></li>
<li><a href="#_during_implementation_phase_1">During Implementation (Phase 1)</a></li>
<li><a href="#_after_first_poc">After First PoC</a></li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_context"><a class="anchor" href="#_context"></a>Context</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With Snowflake selected as the analytical platform (ADR-001), we must decide <strong>how</strong> data flows from all identified sources into the data warehouse. This ADR covers ingestion strategy for every source — not just the two primary databases, but also wholesaler feeds and email data.</p>
</div>
<div class="sect2">
<h3 id="_source_1_wordpress_database"><a class="anchor" href="#_source_1_wordpress_database"></a>Source 1 — WordPress Database</h3>
<div class="paragraph">
<p>The client&#8217;s WordPress e-commerce platform is the primary web channel, serving ~1M daily customers. Discovery confirmed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>900GB MySQL database</strong> — heavily customized schema, not standard WooCommerce</p>
</li>
<li>
<p><strong>Hosted on-prem</strong> — not in AWS; requires network connectivity (VPN or Direct Connect)</p>
</li>
<li>
<p><strong>Free access</strong> — no contractual barriers to reading or replicating the database</p>
</li>
<li>
<p><strong>Live production database</strong> — must not impact transactional performance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The non-standard schema rules out off-the-shelf CDC connectors (Fivetran, Airbyte WooCommerce connector) that expect standard WooCommerce table structures. Custom extraction or transformation logic is required regardless of approach.</p>
</div>
<div class="paragraph">
<p><strong>Key access fact:</strong> Client confirmed free, unrestricted access to the database — both direct read and replication are technically possible.</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_2_mobile_application"><a class="anchor" href="#_source_2_mobile_application"></a>Source 2 — Mobile Application</h3>
<div class="paragraph">
<p>The mobile app is a <strong>primary channel</strong> with 2M installs (not a secondary channel as initially assumed). Discovery confirmed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>External vendor</strong> manages the app (5 years: 2 years dev, 3 years maintenance)</p>
</li>
<li>
<p><strong>Own database on vendor backend</strong> — <strong>available on request</strong> (client&#8217;s words)</p>
</li>
<li>
<p><strong>APIs exist</strong> for working with the backend</p>
</li>
<li>
<p><strong>Vendor relationship:</strong> outsourced, in maintenance phase for 3 years</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Key access fact:</strong> Both API access and database access are available paths. "Available on request" means we can negotiate either or both. The vendor has been in a 3-year maintenance contractual relationship — they are unlikely to refuse reasonable data access requests, but are also unlikely to invest in new development (e.g., webhooks, custom endpoints).</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_3_wholesaler_data"><a class="anchor" href="#_source_3_wholesaler_data"></a>Source 3 — Wholesaler Data</h3>
<div class="paragraph">
<p>Multiple wholesaler systems provide product, pricing, and deal data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Multiple sources</strong> — plurality of suppliers confirmed</p>
</li>
<li>
<p><strong>"Everything, no standard"</strong> — client&#8217;s own description of the format diversity</p>
</li>
<li>
<p><strong>Data types:</strong> amounts, discounts, deals, product catalogs</p>
</li>
<li>
<p><strong>No APIs confirmed</strong> — likely file-based (CSV, Excel, XML, email attachments)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_source_4_customer_emails"><a class="anchor" href="#_source_4_customer_emails"></a>Source 4 — Customer Emails</h3>
<div class="ulist">
<ul>
<li>
<p><strong>15 years of accumulated email data</strong> within WordPress DB</p>
</li>
<li>
<p><strong>Data quality issues</strong> — some are disposable/expired "10-minute mailboxes"</p>
</li>
<li>
<p><strong>GDPR consent confirmed</strong></p>
</li>
<li>
<p><strong>Not a separate ingestion source</strong> — emails are extracted as part of Source 1 (WordPress DB). Data quality handling (validation, deduplication, bounce detection) belongs in the dbt transformation layer, not in the ingestion layer.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_architectural_environment"><a class="anchor" href="#_architectural_environment"></a>Architectural Environment</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Hybrid infrastructure</strong> — on-prem hosting + AWS for some services</p>
</li>
<li>
<p><strong>Target platform</strong> — Snowflake on AWS EU region (ADR-001)</p>
</li>
<li>
<p><strong>Orchestration</strong> — Apache Airflow (ADR-001)</p>
</li>
<li>
<p><strong>Transformation</strong> — dbt (ADR-001)</p>
</li>
<li>
<p><strong>No data team</strong> — no team, no plans, no expertise; solution must be operationally simple</p>
</li>
<li>
<p><strong>Budget</strong> — $500K total; ingestion is a subset of overall spend</p>
</li>
<li>
<p><strong>GDPR</strong> — consent confirmed; data residency in EU required</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_professional_assumptions"><a class="anchor" href="#_professional_assumptions"></a>Professional Assumptions</h3>
<div class="paragraph">
<p>The following assumptions are made based on standard e-commerce database patterns and enterprise norms. They replace questions that a professional solution architect should not need to ask the client. Each will be <strong>verified during PoC</strong> — not treated as blockers.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">#</th>
<th class="tableblock halign-left valign-top">Assumption</th>
<th class="tableblock halign-left valign-top">Fallback if Wrong</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WordPress MySQL has <code>updated_at</code> / <code>modified_date</code> timestamp columns on key transactional tables (orders, products, customers). This is standard practice for any e-commerce platform in active use for 15 years.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use checksum-based delta detection or <code>AUTO_INCREMENT</code> ID range queries. Initial full-scan with hash comparison can identify rows without timestamps.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MySQL read replica is feasible. Standard MySQL replication capability; client has on-prem infrastructure team capable of basic MySQL administration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proceed with read-only user on production database + query governor (limit concurrent connections, statement timeout). Schedule extraction in off-peak hours only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WordPress schema is stable. A 15-year-old heavily-customized system implies mature, infrequently-changing schema. Major schema changes would be risky for their production platform.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbt staging tests + Airflow sensor checks detect schema drift. Manual query update process estimated at &lt;1 day per change.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile vendor API uses standard authentication (OAuth2 or API key). Industry standard for REST APIs.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any auth mechanism is implementable in Airflow. Not an architectural concern.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile vendor API rate limits are manageable for daily batch ingestion. 2M users ÷ API pagination (1000 records/page) = ~2000 API calls — well within typical rate limits.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request rate limit increase in vendor contract. Or switch to DB dump approach (see Mobile Option B).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No existing VPN/Direct Connect between on-prem and AWS. Assumed based on the hybrid setup description — if it exists, it saves 2-4 weeks of setup time.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If VPN exists, skip setup phase. Budget allocation is unaffected.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Related sections in Solution Design:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>§ Data Architecture — data flow from sources through ETL to Snowflake</p>
</li>
<li>
<p>§ System Context — shows where ingestion components fit</p>
</li>
<li>
<p>ADR-001 — Snowflake platform choice</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_decision"><a class="anchor" href="#_decision"></a>Decision</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>We will use source-specific ingestion strategies, matched to each source&#8217;s access model and constraints. All paths converge on a unified S3 staging area → Snowflake landing zone → dbt transformation pipeline.</strong></p>
</div>
<div class="sect2">
<h3 id="_source_1_wordpress_direct_database_read_scheduled_sql_via_vpn"><a class="anchor" href="#_source_1_wordpress_direct_database_read_scheduled_sql_via_vpn"></a>Source 1: WordPress — Direct Database Read (Scheduled SQL via VPN)</h3>
<div class="paragraph">
<p><strong>We will read from the WordPress MySQL database directly using scheduled SQL queries over a secure VPN/Direct Connect connection, extracting delta changes based on timestamp columns.</strong></p>
</div>
<div class="paragraph">
<p>Implementation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Establish <strong>AWS Direct Connect or site-to-site VPN</strong> between on-prem data center and AWS VPC</p>
</li>
<li>
<p>Create a <strong>read-only MySQL replica</strong> (recommended) or read-only user on production database</p>
</li>
<li>
<p>Build <strong>custom SQL extraction queries</strong> in Airflow DAGs that pull delta changes (<code>WHERE updated_at &gt; last_run</code>)</p>
</li>
<li>
<p>Land raw data as Parquet files in an <strong>S3 staging area</strong> (partitioned by extraction date), then load into Snowflake via <code>COPY INTO</code></p>
</li>
<li>
<p>Transform in Snowflake using <strong>dbt</strong> models (staging → intermediate → mart layers)</p>
</li>
<li>
<p>Schedule: <strong>nightly incremental batch</strong> + <strong>weekly full refresh</strong> for reconciliation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rationale: The 900GB heavily-customized schema requires custom extraction regardless of tool. Direct SQL read over VPN is the simplest path — no additional middleware, no CDC infrastructure, no replica management in AWS. A local read replica (on-prem) fully isolates production. We extract <strong>only the analytical subset</strong> (estimated 10-30% of tables), not the full 900GB. This is the decisive advantage over full replication approaches: we avoid paying for storage and transfer of WordPress core tables, plugin metadata, and media references that have no analytical value.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If discovery reveals we need 80%+ of the schema, we should revisit <strong>Option B (MySQL → RDS Replica)</strong> which becomes more cost-effective at high table coverage.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_source_2_mobile_app_api_integration_periodic_db_export_hybrid"><a class="anchor" href="#_source_2_mobile_app_api_integration_periodic_db_export_hybrid"></a>Source 2: Mobile App — API Integration + Periodic DB Export (Hybrid)</h3>
<div class="paragraph">
<p><strong>We will use the vendor&#8217;s existing APIs as the primary ongoing ingestion path, supplemented by periodic database exports for initial bulk load and for data the API does not expose.</strong></p>
</div>
<div class="paragraph">
<p>Implementation — API path (primary, ongoing):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Negotiate <strong>API access agreement</strong> with mobile vendor (scope, rate limits, authentication)</p>
</li>
<li>
<p>Build <strong>Airflow DAGs</strong> with HTTP operators to call vendor APIs on schedule</p>
</li>
<li>
<p>Extract customer profiles, transactions, and engagement data via paginated API calls</p>
</li>
<li>
<p>Land JSON responses in <strong>S3 staging area</strong>, then load into Snowflake via <code>COPY INTO</code></p>
</li>
<li>
<p>Transform and normalize in Snowflake using <strong>dbt</strong> models</p>
</li>
<li>
<p>Schedule: <strong>daily batch</strong> (aligned with WordPress refresh for consistent analytics)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementation — DB export path (complementary):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request vendor to provide a <strong>periodic database export</strong> (SQL dump, CSV, or Parquet) — weekly or on-demand</p>
</li>
<li>
<p>Vendor drops export files into a <strong>shared S3 bucket</strong> (or SFTP → S3 via Airflow)</p>
</li>
<li>
<p>Use for: <strong>initial historical backfill</strong>, <strong>data validation</strong> (reconcile API data vs. full DB), <strong>access to data the API doesn&#8217;t expose</strong> (e.g., raw session logs, internal user attributes)</p>
</li>
<li>
<p>Schedule: <strong>weekly</strong> or on-demand (not real-time — this is a reconciliation and gap-filling mechanism)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rationale: APIs are the vendor&#8217;s intended integration surface — sustainable, contractually enforceable, resilient to backend schema changes. However, APIs typically expose only a curated subset of data. For a recommendation engine, we likely need transaction-level detail, user behavior data, and session data that many APIs don&#8217;t expose. The DB export path fills this gap without requiring the vendor to build new API endpoints (which is unlikely given their 3-year maintenance posture). This <strong>API + export hybrid</strong> is a common enterprise pattern: API for steady-state incremental data, bulk export for backfill and reconciliation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The DB export path is <strong>contractually dependent</strong> — we must confirm the vendor&#8217;s willingness. If refused, we proceed API-only and accept the data coverage limitation (see Question Q2 in discovery questions).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_source_3_wholesaler_data_file_landing_zone_s3_schema_on_read"><a class="anchor" href="#_source_3_wholesaler_data_file_landing_zone_s3_schema_on_read"></a>Source 3: Wholesaler Data — File Landing Zone (S3 + Schema-on-Read)</h3>
<div class="paragraph">
<p><strong>We will establish an S3-based file landing zone where wholesaler data files are received, validated, and loaded into Snowflake using schema-on-read (VARIANT columns) to handle format diversity.</strong></p>
</div>
<div class="paragraph">
<p>Implementation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a <strong>structured S3 landing zone</strong> with per-supplier prefixes: <code>s3://landing/wholesalers/{supplier_id}/{date}/</code></p>
</li>
<li>
<p>Accept files in <strong>any format</strong> the supplier provides: CSV, Excel (.xlsx), XML, JSON — convert to a common intermediate format (CSV or Parquet) via lightweight Airflow preprocessing DAGs</p>
</li>
<li>
<p>Load into Snowflake <strong>VARIANT columns</strong> (semi-structured data) in a raw staging schema — this allows schema-on-read, meaning each supplier&#8217;s different format is preserved without upfront schema normalization</p>
</li>
<li>
<p>Build <strong>supplier-specific dbt models</strong> that extract structured columns from the VARIANT data — one model per supplier (or supplier group if formats match)</p>
</li>
<li>
<p>Add <strong>file validation</strong> in Airflow: check file presence, minimum row count, expected columns, data type checks — alert on anomalies before loading</p>
</li>
<li>
<p>Schedule: <strong>triggered by file arrival</strong> (S3 event notification → Airflow sensor) or <strong>daily scan</strong> of landing zone</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rationale: "No standard format" is the defining constraint. Trying to force suppliers into a standard format or API is not realistic — they are external entities with their own systems. Schema-on-read is the proven pattern for heterogeneous source data: accept what you get, validate it, transform it supplier-by-supplier in dbt. Snowflake VARIANT columns are designed exactly for this use case. This approach scales to any number of suppliers with any format — adding a new supplier means adding one dbt model, not changing the ingestion infrastructure.</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_4_customer_emails_no_separate_ingestion"><a class="anchor" href="#_source_4_customer_emails_no_separate_ingestion"></a>Source 4: Customer Emails — No Separate Ingestion</h3>
<div class="paragraph">
<p><strong>Customer email data does NOT require a separate ingestion strategy.</strong> Emails are stored within the WordPress MySQL database and will be extracted as part of Source 1 (WordPress ingestion).</p>
</div>
<div class="paragraph">
<p>Data quality handling for email addresses belongs in the <strong>dbt transformation layer</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Deduplication</strong> — identify and merge duplicate customer records sharing email addresses</p>
</li>
<li>
<p><strong>Validation</strong> — regex format validation, disposable email domain detection (10-minute mailboxes)</p>
</li>
<li>
<p><strong>Bounce tracking</strong> — integrate AWS SES bounce/complaint notifications back into Snowflake to mark invalid addresses</p>
</li>
<li>
<p><strong>GDPR consent flag</strong> — propagate consent status from WordPress into analytical models</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is a <strong>transformation concern, not an ingestion concern</strong>. The ingestion pipeline extracts raw email data as-is; dbt models clean and enrich it.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_alternatives_considered"><a class="anchor" href="#_alternatives_considered"></a>Alternatives Considered</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_wordpress_ingestion_alternatives"><a class="anchor" href="#_wordpress_ingestion_alternatives"></a>WordPress Ingestion Alternatives</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 18.1818%;">
<col style="width: 27.2727%;">
<col style="width: 27.2727%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Alternative</th>
<th class="tableblock halign-left valign-top">Pros</th>
<th class="tableblock halign-left valign-top">Cons</th>
<th class="tableblock halign-left valign-top">Why Not Chosen</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option A: Direct SQL Read via VPN</strong> ✓ CHOSEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simplest architecture — SQL queries over network connection. Full control over what data is extracted (<code>SELECT</code> exactly what&#8217;s needed). No additional middleware or AWS infrastructure beyond VPN. Familiar technology (SQL + Airflow). Works with any schema, customized or not. Read replica (on-prem) isolates production. Extracts only analytical subset — avoids replicating 900GB. Lowest ongoing cost.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires VPN/Direct Connect setup. Tightly coupled to MySQL schema — schema changes require query updates. No real-time capability (batch only). Must manage delta detection manually (timestamp-based). Network dependency during extraction windows.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CHOSEN</strong> — simplest path with full control. Extracts only what we need (~10-30% of tables). Custom schema requires custom queries regardless of approach. Read replica eliminates production impact.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option B: MySQL Native Replication → RDS → Snowflake</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complete data copy — no missed data, no delta management. Read replica lives in AWS — extraction queries run locally (fast, no VPN dependency during ETL). Binlog-based replication is near-real-time. Production fully isolated. Standard MySQL replication is well-documented and reliable. <strong>Strongest candidate if we need &gt;80% of the schema.</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replicates all 900GB including irrelevant data (WordPress core tables, plugin metadata, media references). RDS storage cost: ~$600-800/mo for 900GB gp3. Initial replication of 900GB over VPN may take days. Schema changes propagate automatically — can break downstream ETL without warning. Still requires custom transformation (dbt) regardless. VPN/Direct Connect still required for replication link.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cost-effective only if we need most of the schema. For analytical use we estimate 10-30% of tables are relevant — replicating 100% wastes $600-800/mo on storage and adds risk from uncontrolled schema propagation. <strong>Revisit if table inventory (Q1) reveals &gt;80% coverage needed.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option C: AWS DMS (Database Migration Service)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Managed service — no custom replication setup. Supports MySQL → S3 or MySQL → RDS in both full-load and CDC (ongoing replication) modes. Built-in table mapping and filtering. AWS-native — integrates with VPC, CloudWatch, IAM. Handles initial bulk load + ongoing changes in a single configuration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Heavily-customized MySQL schemas are a known risk factor for DMS — LOB columns, triggers, stored procedures, and non-standard character sets can cause mapping failures. DMS has operational quirks (task restarts, memory tuning, table mapping debugging). DMS CDC mode requires binlog access — same prerequisite as native replication. Ongoing DMS instance cost: ~$200-400/mo (dms.r5.large). Less community knowledge than direct SQL or native replication — harder to troubleshoot.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DMS excels at standard schema migrations, not ongoing extraction from heavily-customized databases. The customized WordPress schema (confirmed as non-standard WooCommerce) is exactly the scenario where DMS mapping issues are most likely. Direct SQL gives us more control with less risk. <strong>Would reconsider if schema were standard WooCommerce.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option D: Batch Dump + Ship (mysqldump / XtraBackup)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conceptually simplest — run <code>mysqldump</code>, compress, upload to S3. No replication infrastructure. Works with any schema. Can extract specific databases/tables. Proven, battle-tested tool (mysqldump has existed for 20+ years). Good for one-time initial bulk load.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prohibitively slow for ongoing use at 900GB scale — full dump takes 4-8 hours, compression and network transfer add more. Locks tables during dump (MyISAM) or requires consistent snapshot (InnoDB — <code>--single-transaction</code>). Network transfer of compressed 900GB (~200-300GB) takes hours over VPN. No incremental capability (full dump every time, unless splitting by table). Impractical for nightly batch.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viable <strong>only for one-time initial bulk load</strong> — not for ongoing ingestion. For nightly delta extraction, direct SQL with timestamp-based queries is faster by orders of magnitude (extracting only changed rows vs. dumping the entire database). <strong>We may use mysqldump for the initial historical load, then switch to Option A for ongoing extraction.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option E: CDC with Debezium (binlog → Kafka → Snowflake)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Near-real-time change capture. Captures all change types including deletes (direct SQL misses deletes without soft-delete columns). No dependency on <code>updated_at</code> columns. Industry-standard CDC pattern. Decouples source from consumers via Kafka topics — multiple consumers can subscribe.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires Apache Kafka (AWS MSK: ~$8K-12K/mo for production cluster). Requires Debezium connector setup and management. Team has zero Kafka or streaming expertise — steep learning curve. Operational complexity is an order of magnitude higher than SQL + Airflow. Production MySQL must have binlog enabled and configured for row-based replication. MSK + Debezium alone may consume 15-20% of the $500K budget in first-year OPEX. Customized schema still requires custom transformation downstream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Massively over-engineered for batch analytics needs. Real-time was not requested by the client. The team cannot operate Kafka — it would become a single point of failure with no internal expertise. Budget impact ($8-12K/mo OPEX) is prohibitive. <strong>Only justified if future requirements demand sub-minute data freshness — revisit if/when real-time use cases emerge.</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_mobile_app_ingestion_alternatives"><a class="anchor" href="#_mobile_app_ingestion_alternatives"></a>Mobile App Ingestion Alternatives</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 18.1818%;">
<col style="width: 27.2727%;">
<col style="width: 27.2727%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Alternative</th>
<th class="tableblock halign-left valign-top">Pros</th>
<th class="tableblock halign-left valign-top">Cons</th>
<th class="tableblock halign-left valign-top">Why Not Chosen</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option A: API Integration + Periodic DB Export (Hybrid)</strong> ✓ CHOSEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Best of both worlds: API for ongoing incremental data (standard, vendor-supported, resilient to backend changes) + DB export for initial backfill and data the API doesn&#8217;t expose. Common enterprise integration pattern. API can be included in vendor SLA. DB export requires minimal vendor effort (one script, periodic run). Maximizes data coverage without requiring vendor to build new features.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Two integration paths to maintain (API + file processing). API rate limits may throttle bulk extraction. DB export format/schema may change without notice. Requires vendor agreement for both API access and export provision. More complex than single-path approach.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CHOSEN</strong> — maximizes data access from the primary channel (2M installs). API is sustainable for ongoing data; export fills the gaps the API doesn&#8217;t cover. Vendor is in maintenance mode (3 years) — requesting a nightly export script is more realistic than requesting new API endpoints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option B: API-Only Integration (Scheduled REST Calls)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single integration path — simpler to maintain. APIs already exist (confirmed). Standard, vendor-supported pattern. Resilient to backend schema changes. Vendor maintains API contract. Can be included in vendor SLA. Cleaner data contract.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data access is <strong>limited to what the API exposes</strong> — for a recommendation engine, we need transaction-level detail, user behavior, and session data that many APIs don&#8217;t provide. Initial historical data backfill may be very slow through API pagination. If the API doesn&#8217;t expose a data point, we simply cannot access it — no fallback. Rate limits may constrain extraction volume.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viable but potentially insufficient. If the vendor API exposes all data we need for the recommendation engine, this is the simpler approach. But we cannot verify API data coverage until we have the API documentation (Q2). The hybrid approach (Option A) de-risks this by providing a DB export fallback.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option C: DB Dump / Replication Only (No API)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complete data access — every table, every column. No API limitations, no rate limits. Full database dump is conceptually simple. Could use DB replication for near-real-time sync if vendor&#8217;s DB is MySQL/PostgreSQL. Fastest for bulk historical load.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tightly couples us to vendor&#8217;s internal database schema — which is unknown, undocumented, and can change without notice. Vendor is external — they have no obligation to keep their schema stable for our consumption. Requires ongoing coordination with vendor for schema changes. No SLA on database structure or availability. If vendor changes DB engine or refactors schema, our entire pipeline breaks. Fundamentally fragile for a vendor-controlled system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Too fragile for long-term reliance on an external vendor. The vendor has been in maintenance for 3 years — schema changes may happen during their own maintenance without notification. API provides a stable contract; raw DB access does not. <strong>Use DB export as a complement (Option A), not as the sole integration path.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option D: Webhook / Event-Driven Push (Vendor → Our Endpoint)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Near-real-time data delivery. Vendor controls push cadence. No polling overhead — data arrives when events happen. Clean event-driven architecture. Could feed both Snowflake and real-time systems.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires vendor to <strong>build webhook infrastructure</strong> — new development work. Vendor has been in maintenance mode for 3 years — unlikely to invest in new features. Changes vendor contract scope and cost. We must build and maintain a webhook receiver (API Gateway → Lambda → S3). Not suitable for historical data backfill. Event schema must be designed and agreed upon.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vendor is in maintenance mode — requesting new feature development (webhook infrastructure) is unrealistic without significant contract changes and budget. This is the ideal long-term pattern but not viable in the current vendor engagement model. <strong>Consider if vendor contract is renegotiated in the future.</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_wholesaler_data_ingestion_alternatives"><a class="anchor" href="#_wholesaler_data_ingestion_alternatives"></a>Wholesaler Data Ingestion Alternatives</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 18.1818%;">
<col style="width: 27.2727%;">
<col style="width: 27.2727%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Alternative</th>
<th class="tableblock halign-left valign-top">Pros</th>
<th class="tableblock halign-left valign-top">Cons</th>
<th class="tableblock halign-left valign-top">Why Not Chosen</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option A: File Landing Zone (S3 + Schema-on-Read)</strong> ✓ CHOSEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handles any format — CSV, Excel, XML, JSON. No requirements imposed on suppliers. Snowflake VARIANT columns provide native semi-structured data support. Adding a new supplier = adding one dbt model, not changing infrastructure. Airflow file validation catches data quality issues before loading. S3 event triggers enable near-real-time processing when files arrive. Low operational overhead — standard Airflow + S3 + Snowflake stack.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires per-supplier dbt models — each new supplier needs custom transformation logic. Manual effort to onboard each new supplier format. No real-time sync — batch processing based on file arrival. File delivery depends on supplier reliability (they must actually send files). No automatic schema validation against a standard — each supplier&#8217;s format is accepted as-is.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CHOSEN</strong> — only viable pattern when source formats are explicitly "no standard". Schema-on-read accepts reality rather than fighting it. Scales to any number of suppliers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option B: Supplier API Integration</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clean, programmatic data access. Could enable near-real-time pricing/deal updates. Standard REST/GraphQL patterns. Automatic, scheduled pulls.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No APIs confirmed from any wholesaler. Grocery supply chain wholesalers typically use file-based data exchange, not APIs. Integrating even one supplier API requires custom connector development. Each supplier would need a separate API integration — no economies of scale. Maintaining multiple API integrations with external parties is operationally expensive.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No evidence that wholesaler APIs exist. "No standard format" description strongly implies file-based data exchange. Building API integrations that don&#8217;t exist yet is speculative engineering.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option C: EDI (Electronic Data Interchange)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Industry standard for supply chain data exchange. Structured format (EDIFACT, X12). Widely used in retail/grocery. Could integrate with existing procurement systems.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EDI integration is expensive ($50K-100K+ for setup + $5K-10K/mo for EDI VAN provider). Requires EDI mapping and translation layer. Overkill for analytical use case — we need pricing/deal data for recommendations, not operational supply chain transactions. EDI is designed for purchase orders, invoices, and logistics — not for feeding a recommendation engine.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EDI solves the supply chain operations problem, not the analytics problem. We need wholesaler data (amounts, discounts, deals) as input to product recommendations — not EDI transaction processing. Cost is prohibitive relative to the value for analytics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Option D: Unified Supplier Portal (Build Data Upload UI)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standardizes data format — suppliers input data through a web form or structured upload. Validation at the point of entry. Eliminates format diversity problem at the source.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires building and maintaining a web application — significant development effort outside core scope. Suppliers must adopt a new tool — change management challenge with external parties. Delays data availability until portal is built and adopted. Scope creep risk — portal features tend to expand. Some suppliers may refuse or ignore the portal.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Over-engineered for the current need. We need to ingest existing data, not build a supplier-facing platform. The file landing zone handles the format diversity problem at lower cost and without requiring supplier behavior change.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_consequences"><a class="anchor" href="#_consequences"></a>Consequences</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_positive"><a class="anchor" href="#_positive"></a>Positive</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Complete data coverage</strong> — all four source types have defined ingestion paths, eliminating the "islands of information" problem the client described</p>
</li>
<li>
<p><strong>Source-matched strategies</strong> — each source uses the ingestion pattern that fits its access model, avoiding one-size-fits-all over-engineering</p>
</li>
<li>
<p><strong>Operationally simple</strong> — SQL queries, REST API calls, and file processing are familiar technologies; no CDC frameworks, no streaming infrastructure, no Kafka</p>
</li>
<li>
<p><strong>Controlled extraction (WordPress)</strong> — direct SQL allows extracting only the analytical subset (~10-30% of tables), avoiding the cost and complexity of replicating the full 900GB</p>
</li>
<li>
<p><strong>Maximized mobile data access</strong> — hybrid API + export approach provides both ongoing incremental data and access to data the API doesn&#8217;t expose, critical for a recommendation engine that needs behavioral data from the primary channel</p>
</li>
<li>
<p><strong>Format-agnostic wholesaler ingestion</strong> — schema-on-read via Snowflake VARIANT accepts any supplier format without imposing standards on external parties</p>
</li>
<li>
<p><strong>Unified landing zone</strong> — all sources converge on S3 → Snowflake, maintaining consistent downstream architecture (dbt models, data quality tests, monitoring)</p>
</li>
<li>
<p><strong>Budget-friendly</strong> — no additional licensed tools (Fivetran, Debezium, MSK, DMS, etc.); runs entirely on Airflow + SQL + REST + S3 — all within the existing ADR-001 stack</p>
</li>
<li>
<p><strong>Clear upgrade path</strong> — if real-time requirements emerge, WordPress ingestion can upgrade to CDC (Option E) and mobile can upgrade to webhooks (Option D) without changing the downstream Snowflake + dbt architecture</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_negative"><a class="anchor" href="#_negative"></a>Negative</h3>
<div class="ulist">
<ul>
<li>
<p><strong>VPN/Direct Connect dependency</strong> — WordPress ingestion fails if the network connection drops; requires monitoring, alerting, and manual catchup procedures</p>
</li>
<li>
<p><strong>Schema coupling (WordPress)</strong> — direct SQL queries break if the schema changes; mitigated by dbt staging tests and the assumption that a 15-year-old schema is stable (A3)</p>
</li>
<li>
<p><strong>No real-time capability</strong> — all sources use batch ingestion (nightly/daily); real-time use cases would require significant architectural additions (Kafka, Debezium, webhooks)</p>
</li>
<li>
<p><strong>Dual mobile integration paths</strong> — maintaining both API and DB export processing adds complexity compared to a single-path approach; mitigated by Airflow DAG isolation (separate DAGs)</p>
</li>
<li>
<p><strong>Manual delta management (WordPress)</strong> — timestamp-based delta detection requires reliable <code>updated_at</code> columns; assumed to exist (A1) with fallback strategies defined</p>
</li>
<li>
<p><strong>Per-supplier transformation (Wholesalers)</strong> — each new wholesaler requires custom dbt model work; estimated 1-2 days per supplier for initial model + testing</p>
</li>
<li>
<p><strong>Vendor dependency (Mobile)</strong> — DB export path depends on vendor willingness to provide periodic exports; if refused, we fall back to API-only with reduced data coverage</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dependency_hiring_impact"><a class="anchor" href="#_dependency_hiring_impact"></a>Dependency &amp; Hiring Impact</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Dependency accumulation risk:</strong> Adds VPN/Direct Connect as a network dependency for WordPress. Mobile pipeline depends on vendor API + export willingness. Wholesaler pipeline depends on suppliers delivering files. All are recoverable — if any fails, the pipeline pauses but no data is lost (retry on next schedule). No single dependency is catastrophic.</p>
</li>
<li>
<p><strong>Hiring impact:</strong> SQL + Airflow + REST API + file processing are widely available skills. No specialized CDC, streaming, or Kafka expertise required. <strong>Widens</strong> hiring pool compared to Debezium/Kafka alternatives. The only semi-specialized skill is dbt — which is rapidly becoming standard in the data engineering market.</p>
</li>
<li>
<p><strong>Operational burden:</strong> Moderate. Need to monitor: VPN health, API availability, S3 file arrivals, delta extraction completeness, and dbt test results. Airflow provides built-in retry, alerting, and DAG monitoring for all paths. No new operational paradigms — the same Airflow + dbt + Snowflake stack handles all sources.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_neutral"><a class="anchor" href="#_neutral"></a>Neutral</h3>
<div class="ulist">
<ul>
<li>
<p>Requires AWS Direct Connect or VPN setup — one-time infrastructure work (estimated 2-4 weeks including vendor coordination)</p>
</li>
<li>
<p>S3 staging bucket configuration with lifecycle policies (raw → processed → archive → delete)</p>
</li>
<li>
<p>Airflow DAGs need CI/CD pipeline for deployment (same as ADR-001 dbt deployment)</p>
</li>
<li>
<p>API authentication credentials management (AWS Secrets Manager)</p>
</li>
<li>
<p>Shared S3 bucket or SFTP endpoint for mobile vendor export delivery</p>
</li>
<li>
<p>Wholesaler file landing zone folder structure design (per-supplier prefixes)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quality_attribute_impact"><a class="anchor" href="#_quality_attribute_impact"></a>Quality Attribute Impact</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quality Attribute</th>
<th class="tableblock halign-left valign-top">Impact</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch extraction does not impact Snowflake query performance. WordPress read replica isolates production. API calls and file processing are scheduled off-peak. Snowflake VARIANT columns handle semi-structured wholesaler data with near-native query performance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPN/Direct Connect provides encrypted tunnel for WordPress data transit. API authentication via vendor&#8217;s auth mechanism. S3 buckets encrypted at rest (SSE-S3 or SSE-KMS). All data lands in AWS EU region — GDPR-compliant. Wholesaler files scanned for malware before processing. Secrets Manager for credential rotation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL extraction queries and API DAGs are readable and version-controlled. Per-supplier dbt models are isolated — changing one supplier doesn&#8217;t affect others. Trade-off: WordPress schema changes require query updates (mitigated by dbt tests + assumption A3). Adding a new wholesaler is a well-defined, repeatable process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch approach scales linearly with data volume. WordPress growth → longer extraction runtime but same queries. API pagination handles mobile data growth. File landing zone handles any number of suppliers. For real-time needs, would require architectural change (flagged in upgrade path).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbt staging tests validate data quality at every ingestion boundary. Airflow DAGs can be tested locally. S3 staging area provides inspection point before Snowflake load. Delta extraction is idempotent — can be re-run safely. File validation DAGs can be tested with synthetic sample files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reliability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">−</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network dependencies (VPN for WordPress, internet for vendor API, supplier file delivery) introduce failure points. Mitigated by Airflow retry policies (3 retries with exponential backoff), alerting (Slack/email on DAG failure), and manual catch-up procedures. Weekly WordPress full refresh provides reconciliation safety net.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><em>Impact: + improves, − degrades, = neutral</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_follow_up_actions"><a class="anchor" href="#_follow_up_actions"></a>Follow-Up Actions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_before_implementation"><a class="anchor" href="#_before_implementation"></a>Before Implementation</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> <strong>Obtain WordPress table inventory</strong> — connect to MySQL, list tables with row counts and <code>updated_at</code> column presence; determines scope of extraction and validates assumption A1</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> <strong>Request mobile vendor API documentation</strong> — endpoints, authentication, rate limits, data model; required to design mobile API DAGs</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> <strong>Negotiate mobile DB export agreement</strong> — determine if vendor will provide periodic exports, format, and delivery mechanism</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> <strong>Collect wholesaler sample files</strong> — obtain 2-3 sample files from different suppliers to design landing zone schema and dbt models</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_during_implementation_phase_1"><a class="anchor" href="#_during_implementation_phase_1"></a>During Implementation (Phase 1)</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> Set up AWS Direct Connect or site-to-site VPN between on-prem data center and AWS VPC</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Set up WordPress read replica (preferred) or read-only production user with query governor</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Design S3 staging bucket structure: <code>raw/{source}/{entity}/{date}/</code>, <code>processed/</code>, <code>archive/</code></p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Build PoC: WordPress → one entity (e.g., orders) → S3 → Snowflake → dbt staging model (validates end-to-end path)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Build PoC: Mobile API → one entity (e.g., user profiles) → S3 → Snowflake → dbt staging model</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Build file validation DAG for wholesaler data — format detection, column checks, row count thresholds</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_after_first_poc"><a class="anchor" href="#_after_first_poc"></a>After First PoC</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> Evaluate PoC results — if WordPress extraction needs &gt;80% of tables, revisit Option B (RDS replica)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Evaluate mobile API data coverage — if insufficient for recommendation engine, activate DB export path</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Define monitoring and alerting: VPN health, API availability, file arrival, DAG success/failure, dbt test results</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Onboard first 2-3 wholesaler suppliers with per-supplier dbt models</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Update solution design § Data Architecture with confirmed ingestion paths and data flow diagrams</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>ADR-001: Choose Data Platform for Recommendation Engine — Snowflake selection</p>
</li>
<li>
<p><a href="https://docs.snowflake.com/en/user-guide/data-load-s3">Snowflake: Loading Data from S3</a></p>
</li>
<li>
<p><a href="https://docs.snowflake.com/en/sql-reference/data-types-semistructured">Snowflake: Semi-Structured Data (VARIANT)</a></p>
</li>
<li>
<p><a href="https://airflow.apache.org/docs/apache-airflow-providers-mysql/stable/operators/mysql.html">Airflow MySQL Operator</a></p>
</li>
<li>
<p><a href="https://airflow.apache.org/docs/apache-airflow-providers-http/stable/operators/http.html">Airflow HTTP Operator</a></p>
</li>
<li>
<p><a href="https://airflow.apache.org/docs/apache-airflow-providers-amazon/stable/operators/s3.html">Airflow S3 Sensor / Operator</a></p>
</li>
<li>
<p><a href="https://aws.amazon.com/directconnect/">AWS Direct Connect</a></p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/vpn/latest/s2svpn/VPC_VPN.html">AWS Site-to-Site VPN</a></p>
</li>
<li>
<p><a href="https://aws.amazon.com/dms/">AWS Database Migration Service — evaluated in Option C</a></p>
</li>
<li>
<p><a href="https://debezium.io/">Debezium CDC — evaluated in Option E</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2026-02-19 01:16:03 +0100
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>