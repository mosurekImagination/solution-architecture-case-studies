<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1181px" preserveAspectRatio="none" style="width:2703px;height:1181px;background:#FFFFFF;" version="1.1" viewBox="0 0 2703 1181" width="2703px" zoomAndPan="magnify"><title>Option 1: MVP Architecture (US Only)</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="296.126" x="1196.437" y="22.9951">Option 1: MVP Architecture (US Only)</text></g><!--cluster us--><g class="cluster" data-qualified-name="us" data-source-line="18" id="ent0005"><rect fill="#FAFAFA" height="630.87" rx="5" ry="5" style="stroke:#DEE2E6;stroke-width:1;" width="1785" x="319" y="445.5769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="183.6338" x="1119.6831" y="460.572">AWS US-EAST-1 Region</text></g><!--cluster Compute Layer--><g class="cluster" data-qualified-name="us.Compute Layer" data-source-line="21" id="ent0007"><path d="M468.5,596.1669 L588.9238,596.1669 A3.75,3.75 0 0 1 591.4238,598.6669 L598.4238,618.4638 L1354.5,618.4638 A2.5,2.5 0 0 1 1357,620.9638 L1357,929.5069 A2.5,2.5 0 0 1 1354.5,932.0069 L468.5,932.0069 A2.5,2.5 0 0 1 466,929.5069 L466,598.6669 A2.5,2.5 0 0 1 468.5,596.1669" fill="#F8F9FA" style="stroke:#DEE2E6;stroke-width:1.5;"/><line style="stroke:#DEE2E6;stroke-width:1.5;" x1="466" x2="598.4238" y1="618.4638" y2="618.4638"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="119.4238" x="470" y="611.162">Compute Layer</text></g><!--cluster Modular Monolith--><g class="cluster" data-qualified-name="us.Compute Layer.Modular Monolith" data-source-line="22" id="ent0008"><path d="M760.5,639.1669 L900.4541,639.1669 A3.75,3.75 0 0 1 902.9541,641.6669 L909.9541,661.4638 L1330.5,661.4638 A2.5,2.5 0 0 1 1333,663.9638 L1333,740.2669 A2.5,2.5 0 0 1 1330.5,742.7669 L760.5,742.7669 A2.5,2.5 0 0 1 758,740.2669 L758,641.6669 A2.5,2.5 0 0 1 760.5,639.1669" fill="#E8F5E9" style="stroke:#DEE2E6;stroke-width:1.5;"/><line style="stroke:#DEE2E6;stroke-width:1.5;" x1="758" x2="909.9541" y1="661.4638" y2="661.4638"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="138.9541" x="762" y="654.162">Modular Monolith</text></g><!--cluster AR Microservice--><g class="cluster" data-qualified-name="us.Compute Layer.AR Microservice" data-source-line="27" id="ent0012"><path d="M492.5,652.3169 L619.9922,652.3169 A3.75,3.75 0 0 1 622.4922,654.8169 L629.4922,674.6138 L731.5,674.6138 A2.5,2.5 0 0 1 734,677.1138 L734,905.5069 A2.5,2.5 0 0 1 731.5,908.0069 L492.5,908.0069 A2.5,2.5 0 0 1 490,905.5069 L490,654.8169 A2.5,2.5 0 0 1 492.5,652.3169" fill="#E3F2FD" style="stroke:#DEE2E6;stroke-width:1.5;"/><line style="stroke:#DEE2E6;stroke-width:1.5;" x1="490" x2="629.4922" y1="674.6138" y2="674.6138"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126.4922" x="494" y="667.312">AR Microservice</text></g><!--cluster Data Layer--><g class="cluster" data-qualified-name="us.Data Layer" data-source-line="33" id="ent0015"><path d="M1383.5,791.7669 L1470.4756,791.7669 A3.75,3.75 0 0 1 1472.9756,794.2669 L1479.9756,814.0638 L2077.5,814.0638 A2.5,2.5 0 0 1 2080,816.5638 L2080,918.1569 A2.5,2.5 0 0 1 2077.5,920.6569 L1383.5,920.6569 A2.5,2.5 0 0 1 1381,918.1569 L1381,794.2669 A2.5,2.5 0 0 1 1383.5,791.7669" fill="#EDE7F6" style="stroke:#DEE2E6;stroke-width:1.5;"/><line style="stroke:#DEE2E6;stroke-width:1.5;" x1="1381" x2="1479.9756" y1="814.0638" y2="814.0638"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85.9756" x="1385" y="806.762">Data Layer</text></g><!--cluster AI Services--><g class="cluster" data-qualified-name="AI Services" data-source-line="45" id="ent0022"><path d="M2130.5,981.0069 L2218.9521,981.0069 A3.75,3.75 0 0 1 2221.4521,983.5069 L2228.4521,1003.3038 L2693.5,1003.3038 A2.5,2.5 0 0 1 2696,1005.8038 L2696,1065.7969 A2.5,2.5 0 0 1 2693.5,1068.2969 L2130.5,1068.2969 A2.5,2.5 0 0 1 2128,1065.7969 L2128,983.5069 A2.5,2.5 0 0 1 2130.5,981.0069" fill="#E8F5E9" style="stroke:#DEE2E6;stroke-width:1.5;"/><line style="stroke:#DEE2E6;stroke-width:1.5;" x1="2128" x2="2228.4521" y1="1003.3038" y2="1003.3038"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87.4521" x="2132" y="996.002">AI Services</text></g><!--cluster 3rd Party--><g class="cluster" data-qualified-name="3rd Party" data-source-line="51" id="ent0026"><path d="M8.5,812.5569 L83.4717,812.5569 A3.75,3.75 0 0 1 85.9717,815.0569 L92.9717,834.8538 L292.5,834.8538 A2.5,2.5 0 0 1 295,837.3538 L295,897.3569 A2.5,2.5 0 0 1 292.5,899.8569 L8.5,899.8569 A2.5,2.5 0 0 1 6,897.3569 L6,815.0569 A2.5,2.5 0 0 1 8.5,812.5569" fill="#FFF3E0" style="stroke:#DEE2E6;stroke-width:1.5;"/><line style="stroke:#DEE2E6;stroke-width:1.5;" x1="6" x2="92.9717" y1="834.8538" y2="834.8538"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73.9717" x="10" y="827.552">3rd Party</text></g><!--entity alb--><g class="entity" data-qualified-name="us.alb" data-source-line="19" id="ent0006"><rect fill="#ED7100" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151.0654" x="987.47" y="480.5769"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.0781" x="1012.9637" y="503.572">Application LB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.0654" x="997.47" y="519.8689">HTTPS termination</text></g><!--entity cw--><g class="entity" data-qualified-name="us.cw" data-source-line="40" id="ent0020"><rect fill="#FF4F8B" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162.3447" x="364.83" y="1007.8569"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.4717" x="403.7665" y="1030.852">CloudWatch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142.3447" x="374.83" y="1047.1489">Logs, metrics, alerts</text></g><!--entity ecs1--><g class="entity" data-qualified-name="us.Compute Layer.Modular Monolith.ecs1" data-source-line="23" id="ent0009"><rect fill="#FF9900" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.1279" x="996.44" y="674.1669"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.1279" x="1006.44" y="697.162">ECS: User Mgmt</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.4531" x="1010.7774" y="713.4589">Auth &amp; profiles</text></g><!--entity ecs2--><g class="entity" data-qualified-name="us.Compute Layer.Modular Monolith.ecs2" data-source-line="24" id="ent0010"><rect fill="#FF9900" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152.7266" x="1164.64" y="674.1669"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.7266" x="1174.64" y="697.162">ECS: Partner Mgmt</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.0088" x="1181.9989" y="713.4589">Business profiles</text></g><!--entity ecs3--><g class="entity" data-qualified-name="us.Compute Layer.Modular Monolith.ecs3" data-source-line="25" id="ent0011"><rect fill="#FF9900" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="187.6172" x="774.19" y="674.1669"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.6172" x="784.19" y="697.162">ECS: Recommendations</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.4033" x="825.7969" y="713.4589">Geo queries</text></g><!--entity sqs--><g class="entity" data-qualified-name="us.Compute Layer.AR Microservice.sqs" data-source-line="28" id="ent0013"><path d="M528.26,687.3169 L709.7327,687.3169 C714.7327,687.3169 714.7327,700.4653 714.7327,700.4653 C714.7327,700.4653 714.7327,713.6138 709.7327,713.6138 L528.26,713.6138 C523.26,713.6138 523.26,700.4653 523.26,700.4653 C523.26,700.4653 523.26,687.3169 528.26,687.3169" fill="#FF4F8B" style="stroke:#181818;stroke-width:0.5;"/><path d="M709.7327,687.3169 C704.7327,687.3169 704.7327,700.4653 704.7327,700.4653 C704.7327,713.6138 709.7327,713.6138 709.7327,713.6138" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171.4727" x="528.26" y="705.312">SQS: Recognition Queue</text></g><!--entity ar--><g class="entity" data-qualified-name="us.Compute Layer.AR Microservice.ar" data-source-line="29" id="ent0014"><rect fill="#FF9900" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="212.9922" x="505.5" y="839.4069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192.9922" x="515.5" y="862.402">Lambda: Photo Recognition</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.9805" x="544.0059" y="878.6989">On-demand scaling</text></g><!--entity db--><g class="entity" data-qualified-name="us.Data Layer.db" data-source-line="34" id="ent0016"><path d="M1737.23,836.7669 C1737.23,826.7669 1817.0044,826.7669 1817.0044,826.7669 C1817.0044,826.7669 1896.7788,826.7669 1896.7788,836.7669 L1896.7788,894.6575 C1896.7788,904.6575 1817.0044,904.6575 1817.0044,904.6575 C1817.0044,904.6575 1737.23,904.6575 1737.23,894.6575 L1737.23,836.7669" fill="#3B48CC" style="stroke:#181818;stroke-width:0.5;"/><path d="M1737.23,836.7669 C1737.23,846.7669 1817.0044,846.7669 1817.0044,846.7669 C1817.0044,846.7669 1896.7788,846.7669 1896.7788,836.7669" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.5488" x="1747.23" y="863.762">PostgreSQL Primary</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.5332" x="1757.2378" y="880.0589">t4g.large, 100GB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.6553" x="1790.1768" y="896.3557">PostGIS</text></g><!--entity cache--><g class="entity" data-qualified-name="us.Data Layer.cache" data-source-line="35" id="ent0017"><path d="M1543.28,844.9069 C1543.28,834.9069 1622.9997,834.9069 1622.9997,834.9069 C1622.9997,834.9069 1702.7195,834.9069 1702.7195,844.9069 L1702.7195,886.5006 C1702.7195,896.5006 1622.9997,896.5006 1622.9997,896.5006 C1622.9997,896.5006 1543.28,896.5006 1543.28,886.5006 L1543.28,844.9069" fill="#3B48CC" style="stroke:#181818;stroke-width:0.5;"/><path d="M1543.28,844.9069 C1543.28,854.9069 1622.9997,854.9069 1622.9997,854.9069 C1622.9997,854.9069 1702.7195,854.9069 1702.7195,844.9069" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.21" x="1562.8947" y="871.902">Redis Cache 5GB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.4395" x="1553.28" y="888.1989">Sessions &amp; hot data</text></g><!--entity s3p--><g class="entity" data-qualified-name="us.Data Layer.s3p" data-source-line="36" id="ent0018"><rect fill="#3F8624" height="52.5938" rx="35" ry="35" style="stroke:#181818;stroke-width:0.5;" width="111.335" x="1397.33" y="839.4069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.4736" x="1418.2607" y="862.402">S3 Photos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.335" x="1407.33" y="878.6989">User uploads</text></g><!--entity s3s--><g class="entity" data-qualified-name="us.Data Layer.s3s" data-source-line="37" id="ent0019"><rect fill="#3F8624" height="52.5938" rx="35" ry="35" style="stroke:#181818;stroke-width:0.5;" width="132.2871" x="1931.86" y="839.4069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.2871" x="1941.86" y="862.402">S3 Static Assets</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.3389" x="1960.3341" y="878.6989">CDN origin</text></g><!--entity gv--><g class="entity" data-qualified-name="AI Services.gv" data-source-line="46" id="ent0023"><rect fill="#4285F4" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142.5068" x="2143.75" y="1016.0069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.5068" x="2153.75" y="1039.002">Google Vision API</text></g><!--entity openai--><g class="entity" data-qualified-name="AI Services.openai" data-source-line="47" id="ent0024"><rect fill="#00A67E" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.9277" x="2321.54" y="1016.0069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9277" x="2331.54" y="1039.002">OpenAI GPT-4V</text></g><!--entity gemini--><g class="entity" data-qualified-name="AI Services.gemini" data-source-line="48" id="ent0025"><rect fill="#4285F4" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196.627" x="2483.69" y="1016.0069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176.627" x="2493.69" y="1039.002">Google Gemini (Fallback)</text></g><!--entity email--><g class="entity" data-qualified-name="3rd Party.email" data-source-line="52" id="ent0027"><rect fill="#1A82E2" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.6406" x="194.68" y="847.5569"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.6406" x="204.68" y="870.552">SendGrid</text></g><!--entity maps--><g class="entity" data-qualified-name="3rd Party.maps" data-source-line="53" id="ent0028"><rect fill="#4285F4" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137.2568" x="22.37" y="847.5569"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2568" x="32.37" y="870.552">Google Maps API</text></g><!--entity users--><g class="entity" data-qualified-name="users" data-source-line="14" id="ent0002"><ellipse cx="1526.9955" cy="51.2969" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M1526.9955,59.2969 L1526.9955,86.2969 M1513.9955,67.2969 L1539.9955,67.2969 M1526.9955,86.2969 L1513.9955,101.2969 M1526.9955,86.2969 L1539.9955,101.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.5781" x="1482.2065" y="115.792">Mobile Users</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.8711" x="1480.06" y="132.0889">(iOS/Android)</text></g><!--entity dns--><g class="entity" data-qualified-name="dns" data-source-line="15" id="ent0003"><path d="M1489.423,222.0285 C1493.1833,215.2495 1497.1497,214.2221 1502.7899,220.0324 C1505.9075,214.3096 1511.2095,215.0823 1514.1608,220.2066 C1516.981,212.8903 1523.1007,212.683 1527.2832,218.8841 C1533.1247,212.1059 1537.5789,214.7799 1541.0856,221.3063 C1545.2812,213.3053 1549.6454,213.4505 1555.0239,220.1875 C1558.3393,214.9537 1563.2336,215.2553 1566.049,220.7035 C1572.8694,223.056 1575.2646,228.9967 1568.8635,234.1224 C1573.9609,235.4764 1576.4562,239.0851 1572.4245,243.7987 C1577.8968,249.8636 1576.3638,255.0091 1568.6027,257.3386 C1573.5236,260.5272 1572.5152,265.5767 1567.4745,267.6785 C1564.8847,276.0092 1557.5963,275.3293 1552.9566,269.8305 C1550.5176,277.3486 1545.4847,278.0293 1540.3464,272.4242 C1537.6304,280.558 1533.6294,281.4122 1527.2917,275.8853 C1522.6188,279.6244 1518.3319,278.1625 1516.2278,272.7723 C1511.347,278.4131 1505.2907,277.1242 1502.3764,270.5435 C1496.7942,275.9147 1492.163,275.1986 1489.8716,267.4153 C1485.6818,264.3432 1484.2456,261.0727 1489.2738,257.4478 C1482.5054,254.1121 1482.3016,250.0644 1488.0476,245.4497 C1481.6096,240.6714 1482.2692,236.3592 1489.1076,232.6833 C1483.6628,229.2884 1484.589,225.1191 1489.423,222.0285" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.5332" x="1495.23" y="240.382">Route 53</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.1396" x="1511.9268" y="256.6789">DNS</text></g><!--entity cdn--><g class="entity" data-qualified-name="cdn" data-source-line="16" id="ent0004"><path d="M1448.9704,344.4726 C1453.5494,338.5049 1457.6316,338.8526 1461.2238,345.436 C1464.091,340.0444 1468.769,338.5811 1472.5415,344.5328 C1475.2174,338.8332 1480.4569,338.6037 1483.5261,344.1484 C1485.6248,338.9553 1490.4193,339.0049 1493.5738,342.993 C1498.1317,338.5533 1502.8608,337.6608 1505.6969,344.7963 C1508.6108,338.4294 1514.051,338.0402 1517.5677,344.2263 C1519.4421,338.4208 1524.2524,338.091 1527.6797,342.7216 C1531.0535,336.9242 1535.1838,338.1168 1538.4175,342.8642 C1542.4386,337.272 1548.8881,336.771 1551.6233,344.1712 C1554.4525,339.1552 1559.2827,339.4956 1562.1349,344.1461 C1566.1324,338.6746 1570.7769,338.742 1573.7977,345.1084 C1577.2601,339.555 1580.727,340.4055 1584.0751,345.2217 C1587.8119,339.3653 1592.3291,338.6164 1596.8136,344.4038 C1600.28,339.6076 1604.8271,340.8649 1606.6961,345.9942 C1612.5818,347.4972 1614.4518,352.3683 1609.5628,356.7446 C1615.7293,359.311 1615.8097,364.9728 1610.1741,368.1706 C1615.0483,372.4807 1614.5448,377.3417 1609.0297,380.703 C1614.2194,384.8236 1613.3651,389.4207 1607.7812,392.3903 C1604.7892,396.9239 1599.4118,397.2872 1597.0641,391.7076 C1593.793,398.9946 1589.4088,398.7686 1584.3626,393.504 C1580.6206,398.7719 1577.1227,398.4936 1573.2663,393.6292 C1569.8474,398.149 1566.0554,397.7492 1563.0978,393.1167 C1559.2885,398.7895 1555.6188,398.9844 1551.4599,393.4807 C1547.9831,400.16 1543.5674,399.9716 1539.5198,394.0203 C1536.0544,399.173 1531.6771,400.5515 1527.9114,394.3267 C1524.2841,400.5385 1520.2467,399.8717 1516.2853,394.667 C1513.5694,400.0307 1508.1431,401.0888 1505.0642,395.0233 C1501.4926,399.8883 1496.5658,400.5458 1493.8325,394.1846 C1489.6435,398.0216 1486.1617,398.9989 1483.285,392.8048 C1479.9417,399.0506 1474.382,399.3654 1471.11,392.7374 C1467.6679,396.703 1463.299,395.7691 1461.1345,391.2376 C1457.3033,397.7502 1453.3403,396.4562 1449.2952,391.4576 C1442.9268,389.4184 1441.1992,384.6538 1445.2844,379.1954 C1438.2771,377.2931 1437.5583,373.53 1441.7107,368.0496 C1437.4407,363.6144 1439.654,359.1289 1445.0263,357.8185 C1440.336,352.3036 1441.0495,346.2605 1448.9704,344.4726" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.2051" x="1470.8962" y="363.972">CloudFront CDN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.4775" x="1454.76" y="380.2689">Cache static content</text></g><!--entity auth--><g class="entity" data-qualified-name="auth" data-source-line="43" id="ent0021"><rect fill="#DD344C" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130.9678" x="172.52" y="674.1669"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.8018" x="192.603" y="697.162">AWS Cognito</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.9678" x="182.52" y="713.4589">OAuth 2.0/OIDC</text></g><!--entity slack--><g class="entity" data-qualified-name="slack" data-source-line="56" id="ent0029"><rect fill="#611F69" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.2295" x="394.89" y="1139.4469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.2295" x="404.89" y="1162.442">Slack Alerts</text></g><!--link users to dns--><g class="link" data-entity-1="ent0002" data-entity-2="ent0003" data-link-type="dependency" data-source-line="58" id="lnk30"><path d="M1527,135.8769 C1527,160.4569 1527,184.0969 1527,205.9069" fill="none" id="users-to-dns" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1527,211.9069,1531,202.9069,1527,206.9069,1523,202.9069,1527,211.9069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.123" x="1528" y="178.4538">HTTPS TLS 1.3</text></g><!--link dns to cdn--><g class="link" data-entity-1="ent0003" data-entity-2="ent0004" data-link-type="dependency" data-source-line="59" id="lnk31"><path d="M1527,275.3669 C1527,293.7969 1527,311.1769 1527,329.6069" fill="none" id="dns-to-cdn" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1527,335.6069,1531,326.6069,1527,330.6069,1523,326.6069,1527,335.6069" style="stroke:#181818;stroke-width:1;"/></g><!--link cdn to alb--><g class="link" data-entity-1="ent0004" data-entity-2="ent0006" data-link-type="dependency" data-source-line="60" id="lnk32"><path d="M1439.45,394.2369 C1352.79,419.9369 1227.2024,457.1811 1144.7824,481.6211" fill="none" id="cdn-to-alb" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1139.03,483.3269,1148.7958,484.6032,1143.8237,481.9054,1146.5215,476.9333,1139.03,483.3269" style="stroke:#181818;stroke-width:1;"/></g><!--link alb to ecs1--><g class="link" data-entity-1="ent0006" data-entity-2="ent0009" data-link-type="dependency" data-source-line="61" id="lnk33"><path d="M1063,533.3169 C1063,569.9569 1063,631.2169 1063,667.9169" fill="none" id="alb-to-ecs1" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1063,673.9169,1067,664.9169,1063,668.9169,1059,664.9169,1063,673.9169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.9282" x="1064" y="576.2338">Route requests</text></g><!--link alb to auth--><g class="link" data-entity-1="ent0006" data-entity-2="ent0021" data-link-type="dependency" data-source-line="62" id="lnk34"><path d="M987,511.8269 C875.94,519.1069 663.65,538.6969 490,588.1669 C415.72,609.3369 340.1953,645.3227 290.6253,671.0527" fill="none" id="alb-to-auth" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="285.3,673.8169,295.1308,673.2208,289.7378,671.5134,291.4452,666.1204,285.3,673.8169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.7646" x="582" y="576.2338">JWT validation</text></g><!--link ecs1 to s3p--><g class="link" data-entity-1="ent0009" data-entity-2="ent0018" data-link-type="dependency" data-source-line="64" id="lnk35"><path d="M1090.19,727.2069 C1108.23,743.0969 1133.09,762.8469 1158,775.7669 C1236.24,816.3269 1330.0775,840.2867 1391.2275,853.0967" fill="none" id="ecs1-to-s3p" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1397.1,854.3269,1389.1113,848.5665,1392.2062,853.3017,1387.4711,856.3966,1397.1,854.3269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.1787" x="1159" y="771.8338">Upload photo</text></g><!--link s3p to sqs--><g class="link" data-entity-1="ent0018" data-entity-2="ent0013" data-link-type="dependency" data-source-line="65" id="lnk36"><path d="M1396.9,858.9469 C1277.82,845.9769 991.58,810.8169 758,750.7669 C719.81,740.9469 682.8454,727.3138 655.0054,716.2438" fill="none" id="s3p-to-sqs" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="649.43,714.0269,656.3151,721.0692,654.0762,715.8743,659.2711,713.6354,649.43,714.0269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.7139" x="852" y="771.8338">S3 event trigger</text></g><!--link sqs to ar--><g class="link" data-entity-1="ent0013" data-entity-2="ent0014" data-link-type="dependency" data-source-line="66" id="lnk37"><path d="M618.46,714.0069 C617.32,740.6569 614.8879,797.4124 613.3579,832.9724" fill="none" id="sqs-to-ar" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="613.1,838.9669,617.4832,830.1471,613.3149,833.9715,609.4906,829.8032,613.1,838.9669" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.7808" x="617" y="771.8338">Process async</text></g><!--link ar to gv--><g class="link" data-entity-1="ent0014" data-entity-2="ent0023" data-link-type="dependency" data-source-line="67" id="lnk38"><path d="M718.82,879.9869 C902.6,902.1869 1290.63,946.2569 1620,965.0069 C1673.7,968.0569 2051.98,959.3569 2104,973.0069 C2136.23,981.4569 2164.3359,997.7216 2185.9059,1012.2716" fill="none" id="ar-to-gv" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="2190.88,1015.6269,2185.6557,1007.2778,2186.7349,1012.8308,2181.1819,1013.91,2190.88,1015.6269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.4609" x="1621" y="961.0738">1. Landmark detect</text></g><!--link ar to openai--><g class="link" data-entity-1="ent0014" data-entity-2="ent0024" data-link-type="dependency" data-source-line="68" id="lnk39"><path d="M718.8,879.3869 C867.13,896.4369 1144.02,926.1769 1381,940.0069 C1546.09,949.6369 1587.72,942.4769 1753,948.0069 C1768.31,948.5169 2289.57,967.8669 2304,973.0069 C2328.92,981.8769 2348.2532,997.0921 2363.5032,1011.4621" fill="none" id="ar-to-openai" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="2367.87,1015.5769,2364.063,1006.4935,2364.231,1012.1479,2358.5767,1012.3159,2367.87,1015.5769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.98" x="2168" y="961.0738">2. Rich description</text></g><!--link ar to gemini--><g class="link" data-entity-1="ent0014" data-entity-2="ent0025" data-link-type="dependency" data-source-line="69" id="lnk40"><path d="M718.77,879.8269 C867.08,897.3669 1143.94,927.6969 1381,940.0069 C1584.29,950.5569 2094.05,932.1869 2297,948.0069 C2372.7,953.9069 2393.75,949.6569 2466,973.0069 C2497.95,983.3269 2526.5934,998.716 2549.4034,1012.486" fill="none" id="ar-to-gemini" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="2554.54,1015.5869,2548.9024,1007.5112,2550.2595,1013.0028,2544.7679,1014.36,2554.54,1015.5869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70.0972" x="2439" y="961.0738">3. Fallback</text></g><!--link ecs1 to db--><g class="link" data-entity-1="ent0009" data-entity-2="ent0016" data-link-type="dependency" data-source-line="71" id="lnk41"><path d="M1097.54,727.1469 C1112.05,736.4469 1129.58,745.8669 1147,750.7669 C1195.68,764.4469 1552.59,748.0069 1602,758.7669 C1620.48,762.7869 1622.71,770.9769 1641,775.7669 C1675.14,784.6969 1687.47,770.0769 1720,783.7669 C1743.05,793.4569 1760.4248,806.4611 1777.4748,822.4611" fill="none" id="ecs1-to-db" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1781.85,826.5669,1778.0244,817.4914,1778.204,823.1454,1772.55,823.325,1781.85,826.5669" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.1558" x="1642" y="771.8338">ACID transactions</text></g><!--link ecs1 to cache--><g class="link" data-entity-1="ent0009" data-entity-2="ent0017" data-link-type="dependency" data-source-line="72" id="lnk42"><path d="M1098.52,727.1469 C1112.88,736.2069 1130.06,745.4569 1147,750.7669 C1191.24,764.6269 1205.14,751.9669 1251,758.7669 C1285.67,763.8969 1293.24,771.2569 1328,775.7669 C1349.84,778.5869 1505.46,775.8469 1526,783.7669 C1553.63,794.4169 1574.9003,812.0419 1592.8003,830.3919" fill="none" id="ecs1-to-cache" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1596.99,834.6869,1593.5688,825.4513,1593.4986,831.1077,1587.8422,831.0375,1596.99,834.6869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.2402" x="1329" y="771.8338">Hot data</text></g><!--link ecs2 to db--><g class="link" data-entity-1="ent0010" data-entity-2="ent0016" data-link-type="dependency" data-source-line="73" id="lnk43"><path d="M1317.74,700.8369 C1445.97,701.2369 1696.68,708.6469 1767,758.7669 C1789.28,774.6369 1800.2295,797.3288 1807.2395,820.7488" fill="none" id="ecs2-to-db" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1808.96,826.4969,1810.2113,816.7278,1807.5263,821.7068,1802.5472,819.0218,1808.96,826.4969" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.5078" x="1783" y="771.8338">PostGIS geo queries</text></g><!--link ecs2 to cache--><g class="link" data-entity-1="ent0010" data-entity-2="ent0017" data-link-type="dependency" data-source-line="74" id="lnk44"><path d="M1302.83,727.1869 C1344.77,743.5969 1401.87,763.9369 1454,775.7669 C1485.4,782.8869 1496.38,771.1369 1526,783.7669 C1552.83,795.2069 1573.7238,812.3678 1591.6738,830.2878" fill="none" id="ecs2-to-cache" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1595.92,834.5269,1592.3768,825.3374,1592.3815,830.9943,1586.7247,830.999,1595.92,834.5269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.1494" x="1455" y="771.8338">Cache popular results</text></g><!--link ecs3 to email--><g class="link" data-entity-1="ent0011" data-entity-2="ent0027" data-link-type="dependency" data-source-line="75" id="lnk45"><path d="M811.16,727.1869 C787.76,736.4969 760.07,745.9069 734,750.7669 C720.4,753.2969 245.7,748.8969 236,758.7669 C213.16,781.9669 220.4797,818.0357 228.3497,841.6057" fill="none" id="ecs3-to-email" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="230.25,847.2969,231.1937,837.4933,228.6664,842.5543,223.6055,840.027,230.25,847.2969" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.3643" x="237" y="771.8338">Notifications</text></g><!--link ecs3 to maps--><g class="link" data-entity-1="ent0011" data-entity-2="ent0028" data-link-type="dependency" data-source-line="76" id="lnk46"><path d="M811.16,727.2169 C787.77,736.5269 760.08,745.9269 734,750.7669 C702.7,756.5669 188.93,743.4869 161,758.7669 C126.18,777.8069 107.7807,816.8118 98.7007,841.6418" fill="none" id="ecs3-to-maps" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="96.64,847.2769,103.4877,840.1981,98.3572,842.581,95.9743,837.4505,96.64,847.2769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55.3198" x="162" y="771.8338">POI data</text></g><!--link ecs1 to cw--><g class="link" data-entity-1="ent0009" data-entity-2="ent0020" data-link-type="dependency" data-source-line="78" id="lnk47"><path d="M1028.46,727.1569 C1013.95,736.4569 996.42,745.8769 979,750.7669 C926.68,765.4369 543.89,751.7469 490,758.7669 C444.14,764.7369 417.5,747.3469 389,783.7669 C346.2,838.4469 370.17,873.1669 389,940.0069 C396.04,965.0069 408.2909,985.1113 421.4909,1002.8713" fill="none" id="ecs1-to-cw" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="425.07,1007.6869,422.9117,998.0774,422.0874,1003.6739,416.4909,1002.8496,425.07,1007.6869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.7344" x="390" y="870.2738">Structured logs</text></g><!--link ar to cw--><g class="link" data-entity-1="ent0014" data-entity-2="ent0020" data-link-type="dependency" data-source-line="79" id="lnk48"><path d="M586.43,892.3469 C555.23,923.6269 507.0472,971.9388 475.8372,1003.2288" fill="none" id="ar-to-cw" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="471.6,1007.4769,480.7879,1003.9296,475.131,1003.9368,475.1238,998.28,471.6,1007.4769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.9165" x="530" y="961.0738">Execution logs</text></g><!--link cw to slack--><g class="link" data-entity-1="ent0020" data-entity-2="ent0029" data-link-type="dependency" data-source-line="80" id="lnk49"><path d="M446,1060.9069 C446,1084.4469 446,1112.6069 446,1133.1069" fill="none" id="cw-to-slack" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="446,1139.1069,450,1130.1069,446,1134.1069,442,1130.1069,446,1139.1069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.3887" x="447" y="1105.5138">Error rate &gt;5%</text></g><!--link cdn to s3s--><g class="link" data-entity-1="ent0004" data-entity-2="ent0019" data-link-type="dependency" data-source-line="81" id="lnk50"><path d="M1614.69,369.8569 C1728.27,373.9069 1917.15,388.1069 1963,437.5769 C2069.09,552.0369 2026.3664,759.8669 2006.9064,833.3269" fill="none" id="cdn-to-s3s" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="2005.37,839.1269,2011.5413,831.4513,2006.6504,834.2936,2003.808,829.4027,2005.37,839.1269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.5737" x="2026" y="576.2338">Cache origin</text></g><?plantuml-src XLPjJ-9A5FxUNt42kJUxoUe2HKG-R59Bot83WXJr2r_6TYmJoqoTcUgI6__xFJCjfQZ9ZL7nl3pdvJddZ9hfZC8Yrqnmw8vWVhy4JyPRfcci2qdXsrq42vxjlpkEUcOy9vBiu974pwaK1KzyaGa9RyQ-eO_5BXUSSXtfFS9Bn28ypPec2NqYHQRNz8_sCfRo7Lf3Z3-eR5ZLdl2l0r15b9nAw7QSzuPXZXcHj3Ix_f1TEno6Lw5dD48cL5RISH3qWW6YE2JMA6ZDnIF3I7UAIhNXtzWY-kdnH0gMV6y1KL0OXHDdeaYWjHA5fd3XRlZu9hBgXDTAt_mAfS2I_F7DXliatb9GccWMOtEmIAwjJvnmnpaMsV8U8hYBpW8lMfzrOKLJfAMAZMLuvikMM3SONV8yOp6n1CwkD_ptUhsC0DkuOznAhJ_97g4TZ2-xdOw3_eTsjNm4CeNCo9xAbiLkQESYAJ8YOIwuo9ZUjX1Z65u4LvNXIIA17uriys2UxlI6UuNUmj-GI_64RLKs3HghBXOINbrX7byZB8dKl0QvBXJZLAbFCBt_WLbHbE1G9RO7oEU42dWfg6H73FS4u_sqTcy5SnPBWGMzifYQqjsm5uxhqX6iGBlejegMScP9k3Lo6qAz6DR2VZYy_fpbZEmU4uBrReKMJO0DN_2pXEu8Jq3596CyBIcKdz9zF-5oJ3Gv48bS1vVXe4eMcq0UYKARfL0wbJIwdS5IiXsH-mtN_VGSMKxf3zogpWHdo5XDfjLOu-2ur_sXxt-0Mj64AIX7-y9uHSYJwJMIZZLPotB8hKaJHE6-sPGZjwmV-R6JK-IP84b9a79pT0g7Wrx_arDKhfAd5DNeYqi6GhAKySfJDJnjangDjylvG7IytV2PIDKFs54jMOmVI4QbBgF7RpLr2D3SDrnHtt8ba2axvBtppi_5TEoND1b9Upns-ttVSOxZD8Med2HrkaKDw8aGvWhSCzD6y9PJ2vY-GhlV6rw4_LFhHKuveawMwxF-lRKKA24CsfsEDxWCliIUK3mB3Bw59ClC5IylMrfA3s7U6tcxCh4hkM-PVeHkqFcOTOHBDf4iARTgHrW6xQutx0MzBpEOarpLjUtC7usmJTWCKm3lo8YoWlQWstqQN3cElSPmTlRB75uOGNdtrhC8kkUkOsH6PmuiVjlFU0CTSmVDPtk8S6_j5PSKTrbfLMijXoFuvs4DhxY0vGrn7Ejaz6OqyTRPOONS3B1ZH5RrOfB14QMlfWmSh3GrJzfBcGykCQwy5B6vQKJjUUoWo6YGvX6cZWlC4zpBPtmXpHjyK5VSZd3OOCNYBQfLB9bzk6k8aiOHkETm8BYHDMxo23n_EiQi25VuwfbjFUhBFSLELilhs3DRUrP70QFKX_HeSV0jpq4kSljkIAhmZRTcRjbsEnuZk16QFLMlLaDjnm4ZBQPb0etStanNjIpiVoK9PBYuXxAjBlX3uyBUNwj2cMN3pWngfSGNNX8a-zV5N_L4c4DnoBcy7_y1?></g></svg>